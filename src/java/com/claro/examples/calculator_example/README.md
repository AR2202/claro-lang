# Running Executable Calculator Example
Follow these instructions to get running. Recommend getting started by just running some of the demo programs in `./calculator_programs/`.

# Bazel (Highly Recommended)

#### Compiler Backends
Claro's compiler is designed from the ground up to support multiple backends to allow for various modes of handling the parsed AST Intermediate Representation. For now Claro supports the following Targets:

#### REPL
`$ bazel run calculator_compiler_binary -- --repl --silent`

#### Interpreted
`$ bazel run calculator_compiler_binary -- --interpreted --silent`

#### Java Source Target Output
`$ bazel run calculator_compiler_binary -- --java_source --silent`


# Docker Hub (only if you can't run Bazel)

If at all possible you should definitely prefer running this project with Bazel from source directly, but if you can't get Bazel working you can find docker images for the binaries generated by this project at the [Docker Hub Repo "clarolang"](https://hub.docker.com/repository/docker/clarolang/calculator).

#### REPL Broken in Docker Image
Note that I haven't yet figured out how to get the Lanterna library to work within the Docker Image, so the REPL won't work unless you build from source directly via Bazel rules.

### Pull the Calculator Compiler Docker Image

`$ docker pull clarolang/calculator:compiler`

### Run the Compiler Over a .calculator File to Produce Compiled .java File

`$ docker run -i clarolang/calculator:compiler --java_source --silent --classname=FirstCalculator --package="" < first.calculator > FirstCalculator.java`

### Run the Compiler Over a .calculator File and Run It

`$ docker run -i clarolang/calculator:compiler --java_source --silent --classname=FirstCalculator --package="" < first.calculator > FirstCalculator.java && javac FirstCalculator.java && java FirstCalculator`

### Cleanup After Yourself

The above commands will have produced some artifact files that you probably don't want lying around:
- `<classname>.java`
- `<classname>.class`
- Optionally, any class files for functions that you may have defined in your program. This is a JAVA_SOURCE CompilerBackend implementation detail... They'll look something like this: `<classname>$1$<functionName>.class`

`$ rm FirstCalculator.java FirstCalculator*.class`
